<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Bar Chart Race (Viyaç‰ˆ)</title>
    <link rel="stylesheet" type="text/css" href="./inspector.css" />
  </head>
  <body>
    <div id="chart"></div>

    <!-- SAS Viya DDC é€šè¨Š JS -->
    <script src="https://sassoftware.github.io/sas-visualanalytics-thirdpartyvisualizations/lib/messagingUtil.js"></script>

    <script type="module">
      import define from "./index.js";
      import { Runtime, Inspector } from "./runtime.js";

      const runtime = new Runtime();

      // å•Ÿå‹•æ¨¡çµ„ï¼Œåªæ¸²æŸ“ chart é€™å€‹ cell
      const main = runtime.module(define, (name) => {
        if (name === "chart") return new Inspector(document.querySelector("#chart"));
      });

      // ğŸ“Œ é€™è£¡æ›¿ä»£ notebook åŸæœ¬çš„ CSV è¼‰å…¥ï¼Œå¾ Viya å‚³å…¥è³‡æ–™
      va.messagingUtil.setOnDataReceivedCallback(function (message) {
        const sasData = message.data;

        // âœ… å‡è¨­ SAS å‚³ä¾†çš„è³‡æ–™æ ¼å¼å¦‚ä¸‹ï¼ˆæ¯åˆ—æ˜¯å€‹ç‰©ä»¶ï¼‰ï¼š
        // [
        //   { name: "Apple", category: "Technology", value: 100, date: "2019" },
        //   { name: "Google", category: "Technology", value: 95, date: "2019" },
        //   ...
        // ]

        // ğŸŸ¢ æŠŠè³‡æ–™å‚³çµ¦ Observable ä¸­çš„ `data` è®Šæ•¸
        main.redefine("data", sasData);
      });
    </script>
  </body>
</html>
